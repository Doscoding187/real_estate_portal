import{u as e,r as s,t as a,a as l,j as t,L as r,B as n,P as i,C as d,b as c,F as x,c as m,d as o,e as h,f as j,M as u,g as f,h as p,i as v,k as N,T as g,A as b,l as y,m as w,n as D,o as k,p as C,q as M,s as S,v as T}from"./index-YEX9sPK0.js";function MyDrafts(){const[,F]=e(),[P,$]=s.useState(null),{data:R,isLoading:A,refetch:L}=a.developer.getDrafts.useQuery(),U=a.developer.deleteDraft.useMutation({onSuccess:()=>{l.success("Draft deleted successfully"),L(),$(null)},onError:e=>{l.error("Failed to delete draft",{description:e.message})}});return A?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsx(r,{className:"w-8 h-8 animate-spin text-blue-600"})}):t.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"My Development Drafts"}),t.jsx("p",{className:"text-slate-600",children:"Resume your saved development listings"})]}),t.jsxs(n,{onClick:()=>F("/developer/create-development"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"New Development"]})]})}),R&&0!==R.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>{const s=e.draftData,a=e.progress||(l=e.currentStep,Math.round(l/6*100));var l;const r=(e=>e<30?"bg-red-500":e<70?"bg-yellow-500":"bg-green-500")(a);return t.jsxs(d,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(m,{children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(o,{className:"text-lg line-clamp-1",children:e.draftName||"Untitled Development"}),t.jsx(h,{className:"mt-1",children:s.address||s.city||"No location set"})]}),t.jsx(j,{className:"w-5 h-5 text-slate-400 flex-shrink-0"})]})}),t.jsxs(c,{children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[t.jsx("span",{className:"text-slate-600",children:"Progress"}),t.jsxs("span",{className:"font-semibold text-slate-900",children:[a,"%"]})]}),t.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${r} transition-all duration-300`,style:{width:`${a}%`}})})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[s.city&&s.province&&t.jsxs("div",{className:"flex items-center text-slate-600",children:[t.jsx(u,{className:"w-4 h-4 mr-2 flex-shrink-0"}),t.jsxs("span",{className:"line-clamp-1",children:[s.city,", ",s.province]})]}),s.unitTypes&&s.unitTypes.length>0&&t.jsxs("div",{className:"flex items-center text-slate-600",children:[t.jsx(j,{className:"w-4 h-4 mr-2 flex-shrink-0"}),t.jsxs("span",{children:[s.unitTypes.length," unit type(s)"]})]}),t.jsxs("div",{className:"flex items-center text-slate-500",children:[t.jsx(f,{className:"w-4 h-4 mr-2 flex-shrink-0"}),t.jsx("span",{children:e.lastModified?`Updated ${p(new Date(e.lastModified),{addSuffix:!0})}`:"Recently saved"})]})]})]}),t.jsxs(v,{className:"flex gap-2",children:[t.jsxs(n,{onClick:()=>{return s=e.id,void F(`/developer/create-development?draftId=${s}`);var s},className:"flex-1",variant:"default",children:[t.jsx(N,{className:"w-4 h-4 mr-2"}),"Resume"]}),t.jsx(n,{onClick:()=>{return s=e.id,void $(s);var s},variant:"outline",size:"icon",className:"text-red-600 hover:bg-red-50 hover:text-red-700",children:t.jsx(g,{className:"w-4 h-4"})})]})]},e.id)})}):t.jsx(d,{className:"border-dashed",children:t.jsxs(c,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(x,{className:"w-16 h-16 text-slate-300 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No drafts yet"}),t.jsx("p",{className:"text-slate-500 text-center mb-6",children:"Start creating a development listing and your progress will be automatically saved as a draft."}),t.jsxs(n,{onClick:()=>F("/developer/create-development"),variant:"outline",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"Create Your First Development"]})]})}),t.jsx(b,{open:null!==P,onOpenChange:()=>$(null),children:t.jsxs(y,{children:[t.jsxs(w,{children:[t.jsxs(D,{className:"flex items-center gap-2",children:[t.jsx(k,{className:"w-5 h-5 text-red-600"}),"Delete Draft?"]}),t.jsx(C,{children:"Are you sure you want to delete this draft? This action cannot be undone and all your progress will be lost."})]}),t.jsxs(M,{children:[t.jsx(S,{children:"Cancel"}),t.jsx(T,{onClick:()=>{P&&U.mutate({id:P})},className:"bg-red-600 hover:bg-red-700",disabled:U.isPending,children:U.isPending?t.jsxs(t.Fragment,{children:[t.jsx(r,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Draft"})]})]})})]})}export{MyDrafts as default};
